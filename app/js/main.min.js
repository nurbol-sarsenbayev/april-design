function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function checkInput(e){return!(!e.val()||"email"==e.attr("type")&&!validateEmail(e.val()))&&(e.removeClass("error"),!0)}function parseGET(e){var t=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];if(e&&""!=e||(e=decodeURI(document.location.search)),e.indexOf("?")<0)return Array();var a=[],i=[],s=[];-1!=(e=(e=e.split("?"))[1]).indexOf("#")&&(e=e.substr(0,e.indexOf("#"))),-1<e.indexOf("&")?i=e.split("&"):i[0]=e;for(var n=0;n<i.length;n++)for(var o=0;o<t.length;o++)-1<i[n].indexOf(t[o]+"=")&&-1<i[n].indexOf("=")&&(a[(s=i[n].split("="))[0]]=s[1]);return a}$(function(){var e=$(window),t=$(".page-top"),i=$("html, body"),a=($(".section-header"),$(".main-menu")),o=($(".preloader"),$("#thanks"),parseGET());o&&0<Object.keys(o).length?window.sessionStorage.setItem("utms",JSON.stringify(o)):o=JSON.parse(window.sessionStorage.getItem("utms")||"[]"),e.scroll(function(){s()});var s=function(){e.scrollTop()>e.height()?t.addClass("active"):t.removeClass("active");var s=e.scrollTop()+89;a.find("a.link").each(function(){var e=$(this),t=e.attr("href");if($(t)&&0<$(t).length){var a=$(t),i=a.offset().top;i<=s&&i+a.height()>=s?e.addClass("active"):e.removeClass("active")}})};function n(e){e.fadeOut(500);var t=e.find("form");0<t.length&&t[0].reset();var a=t.find(".phone");0<a.length&&a.removeClass("error")}s(),t.click(function(){i.stop().animate({scrollTop:0},"slow","swing")}),$(".hamburger").click(function(){return $this=$(this),$this.hasClass("is-active")?($this.removeClass("is-active"),a.slideUp("700")):($this.addClass("is-active"),a.slideDown("700")),!1}),$(".main-menu a").click(function(e){e.preventDefault();var t=$(this).attr("href");if(0<t.length){var a=1==t.length?0:$(t).offset().top-88;i.stop().animate({scrollTop:a},"slow","swing")}}),$(".modal-open").click(function(){var e=$(this).data("id"),t=$("#"+e);if("service-modal"==e){var a=$(this).closest("form"),i="";a.find("input:checked").each(function(){i+=$(this).val()+", "}),2<i.length&&(i=i.substring(0,i.length-2)),t.find(".service-span").html(i),t.find(".service-input").val(i)}return t.fadeIn(500),!1}),$(".modal").click(function(){n($(this))}),$(".modal-content").click(function(e){e.stopPropagation()}),$(".modal-close").click(function(){n($(this).closest(".modal"))}),$(".form-submit").click(function(e){e.preventDefault();var t=$(this).closest("form"),a=t.find(":required"),i=!0;a.each(function(){$elem=$(this),$elem.val()&&checkInput($elem)||($elem.addClass("error"),i=!1)});var s=t.serialize();if(0<Object.keys(o).length)for(var n in o)s+="&"+n+"="+o[n];else s+="&utm=Прямой переход";i&&($.ajax({type:"POST",url:"/mail.php",data:s}).done(function(){}),$(this).closest(".modal").fadeOut(500),a.removeClass("error"),t[0].reset(),window.location="/thanks.html")}),$(".modal-submit").click(function(e){e.preventDefault()}),$(".phone").mask("+7 (999) 999 99 99",{completed:function(){$(this).removeClass("error")}}),$("input:required").keyup(function(){var e=$(this);e.hasClass("phone")||checkInput(e)}),$(".price-button").click(function(){var e=$(this).closest("form"),t=e.find(".phone");if(!t.val())return t.addClass("error"),!1;$.ajax({type:"POST",url:"/mail.php",data:e.serialize()}).done(function(){}),e[0].reset()}),$(".carousel-reviews").owlCarousel({nav:!0,dots:!1,loop:!0,smartSpeed:500,autoplay:!0,autoplayTimeout:1e4,margin:60,navText:["",""],responsive:{0:{items:1},768:{items:2}}}),$(".carousel-offer").owlCarousel({nav:!0,dots:!1,loop:!1,smartSpeed:500,margin:60,navText:["",""],responsive:{0:{items:1},768:{items:2},992:{items:3},1200:{items:4}},onInitialized:function(e){var t=$(e.target);t.hasClass("active")||t.addClass("hidden")}}),$(".carousel-certificate").owlCarousel({nav:!0,dots:!1,loop:!0,smartSpeed:500,autoplay:!0,autoplayTimeout:1e4,margin:30,navText:["",""],responsive:{0:{items:1},480:{items:2,autoplay:!1}}});var r=$(".section-offer .item"),l=$(".carousel-offer");r.click(function(e){var t=$(this),a=t.index();r.removeClass("active"),t.addClass("active"),l.addClass("hidden"),l.eq(a).removeClass("hidden")})});